/*! For license information please see framework33.js.LICENSE.txt */
(()=>{var e={733:e=>{e.exports=e=>{let t=new Evaluate(e._app.bind.exp).value();e.innerHTML="object"==typeof t?JSON.stringify(t):void 0!==t?t:""}},211:e=>{e.exports=e=>{let t=e.target;new Evaluate(t._app.change.exp).value(e)}},671:e=>{e.exports=e=>{if(!0===scope.view._click_enabled)return!1;scope.view._click_enabled=!0;let t=e.target;"function"==typeof e.stopPropagation&&e.stopPropagation(),(t&&!t._app||t&&t._app&&!t._app.click)&&(t=t.parentNode,e._parentNode=t),(t&&!t._app||t&&t._app&&!t._app.click)&&(t=t.parentNode,e._parentNode=t),t&&t._app&&t._app.click&&t._app.click.exp&&new Evaluate(t._app.click.exp).value(e),scope.view._click_enabled=!1}},117:e=>{e.exports=e=>{if(!0===scope.view._click_enabled)return!1;scope.view._drag_enabled=!0;let t=e.target;"function"==typeof e.stopPropagation&&e.stopPropagation(),(t&&!t._app||t&&t._app&&!t._app.drag)&&(t=t.parentNode,e._parentNode=t),(t&&!t._app||t&&t._app&&!t._app.drag)&&(t=t.parentNode,e._parentNode=t),t&&t._app&&t._app.drag&&t._app.drag.exp&&new Evaluate(t._app.drag.exp).value(e),scope.view._drag_enabled=!1}},955:e=>{e.exports=e=>{if(!0===scope.view._dragstart_enabled)return!1;scope.view._dragstart_enabled=!0;let t=e.target;"function"==typeof e.stopPropagation&&e.stopPropagation(),(t&&!t._app||t&&t._app&&!t._app.dragstart)&&(t=t.parentNode,e._parentNode=t),(t&&!t._app||t&&t._app&&!t._app.dragstart)&&(t=t.parentNode,e._parentNode=t),t&&t._app&&t._app.dragstart&&t._app.dragstart.exp&&new Evaluate(t._app.dragstart.exp).value(e),scope.view._dragstart_enabled=!1}},715:e=>{e.exports=e=>{if(!0===scope.view._drop_enabled)return!1;scope.view._drop_enabled=!0;let t=e.target;"function"==typeof e.stopPropagation&&e.stopPropagation(),(t&&!t._app||t&&t._app&&!t._app.drop)&&(t=t.parentNode,e._parentNode=t),(t&&!t._app||t&&t._app&&!t._app.drop)&&(t=t.parentNode,e._parentNode=t),t&&t._app&&t._app.drop&&t._app.drop.exp&&new Evaluate(t._app.drop.exp).value(e),scope.view._drop_enabled=!1}},684:e=>{e.exports={get:e=>new Promise((function(t,n){let a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(200==a.status?t(a.response):n(a.response))},a.open("GET",e),a.send(null)})),put:(e,t)=>new Promise((function(n,a){let i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(200==i.status?n(i.response):a(i.response))},i.open("PUT",e),t?(i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t))):i.send(null)})),post:(e,t)=>new Promise((function(n,a){let i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(200==i.status?n(i.response):a(i.response))},i.open("POST",e),t?(i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t))):i.send(null)})),delete:e=>new Promise((function(t,n){let a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&(200==a.status?t(a.response):n(a.response))},a.open("DELETE",e),a.send(null)}))}},314:e=>{e.exports=e=>{new Evaluate(e._app.init.exp).value(e)}},745:e=>{e.exports=e=>{let t=e.target;t&&t._app&&t._app.model&&t._app.model.exp&&setTimeout((function(){t.hasAttribute("data-keep-format")?evaluate.setValue(t._app.model.exp,t.innerHTML):(t.innerHTML=t.innerText,evaluate.setValue(t._app.model.exp,t.innerText))}),100)}},841:e=>{e.exports=e=>{let t=new Evaluate(e._app.attr.exp).value();Array.isArray(t)?e.setAttribute(t[0],t[1]):e._app.attr&&e._app.attr.attr_name?e.setAttribute(e._app.attr.attr_name,t):e.removeAttribute(e._app.attr.attr_name)}},72:e=>{e.exports=e=>{void 0===e._app.original_classes?e._app.original_classes=e.className+"":e.className=e._app.original_classes;let t=new Evaluate(e._app.class.exp).value();Array.isArray(t)?t.map((t=>{e.classList.contains(t)||e.classList.add(t)})):"string"==typeof t?(t=t.split(/\s|,/),t.map((t=>{t.match(/palette/)&&console.log(t,e._app),"string"==typeof t&&t.length>0&&!e.classList.contains(t)&&e.classList.add(t)}))):e._app.original_classes&&(e.className=e._app.original_classes)}},459:e=>{e.exports=e=>{void 0===e._app.original_src&&(e._app.original_src=e.src+"");let t=new Evaluate(e._app.src.exp).value();t?e.src=t:e._app.original_src&&(e.src=e._app.original_src)}},910:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(15),i=n.n(a),o=n(645),r=n.n(o)()(i());r.push([e.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]);const s=r},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(i[r]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);a&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},15:e=>{"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}e.exports=function(e){var n=t(e,4),a=n[1],i=n[3];if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),s="/*# ".concat(r," */"),l=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(l).concat([s]).join("\n")}return[a].join("\n")}},208:(e,t,n)=>{var a="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,l=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=u||h||Function("return this")();var g,v=Array.prototype,m=Function.prototype,_=Object.prototype,y=f["__core-js_shared__"],w=(g=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",b=m.toString,x=_.hasOwnProperty,E=_.toString,k=RegExp("^"+b.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=f.Symbol,D=v.splice,L=V(f,"Map"),T=V(Object,"create"),A=S?S.prototype:void 0,M=A?A.toString:void 0;function N(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function C(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function j(e,t){for(var n,a,i=e.length;i--;)if((n=e[i][0])===(a=t)||n!=n&&a!=a)return i;return-1}function I(e,t){for(var n,a=0,i=(t=function(e,t){if(Y(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||$(e))return!0;return s.test(e)||!r.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:Y(n=t)?n:F(n)).length;null!=e&&a<i;)e=e[R(t[a++])];return a&&a==i?e:void 0}function P(e){return!(!X(e)||(t=e,w&&w in t))&&(function(e){var t=X(e)?E.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?k:d).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function H(e,t){var n,a,i=e.__data__;return("string"==(a=typeof(n=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function V(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return P(n)?n:void 0}N.prototype.clear=function(){this.__data__=T?T(null):{}},N.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},N.prototype.get=function(e){var t=this.__data__;if(T){var n=t[e];return n===a?void 0:n}return x.call(t,e)?t[e]:void 0},N.prototype.has=function(e){var t=this.__data__;return T?void 0!==t[e]:x.call(t,e)},N.prototype.set=function(e,t){return this.__data__[e]=T&&void 0===t?a:t,this},C.prototype.clear=function(){this.__data__=[]},C.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():D.call(t,n,1),!0)},C.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},C.prototype.has=function(e){return j(this.__data__,e)>-1},C.prototype.set=function(e,t){var n=this.__data__,a=j(n,e);return a<0?n.push([e,t]):n[a][1]=t,this},O.prototype.clear=function(){this.__data__={hash:new N,map:new(L||C),string:new N}},O.prototype.delete=function(e){return H(this,e).delete(e)},O.prototype.get=function(e){return H(this,e).get(e)},O.prototype.has=function(e){return H(this,e).has(e)},O.prototype.set=function(e,t){return H(this,e).set(e,t),this};var F=q((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if($(e))return M?M.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(p,(function(e,t,a,i){n.push(a?i.replace(c,"$1"):t||e)})),n}));function R(e){if("string"==typeof e||$(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function q(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],o=n.cache;if(o.has(i))return o.get(i);var r=e.apply(this,a);return n.cache=o.set(i,r),r};return n.cache=new(q.Cache||O),n}q.Cache=O;var Y=Array.isArray;function X(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==E.call(e)}e.exports=function(e,t,n){var a=null==e?void 0:I(e,t);return void 0===a?n:a}},468:(e,t,n)=>{var a="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,l=/^\./,p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,d=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,f="object"==typeof self&&self&&self.Object===Object&&self,g=h||f||Function("return this")();var v,m=Array.prototype,_=Function.prototype,y=Object.prototype,w=g["__core-js_shared__"],b=(v=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",x=_.toString,E=y.hasOwnProperty,k=y.toString,S=RegExp("^"+x.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=g.Symbol,L=m.splice,T=R(g,"Map"),A=R(Object,"create"),M=D?D.prototype:void 0,N=M?M.toString:void 0;function C(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function j(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function I(e,t,n){var a=e[t];E.call(e,t)&&z(a,n)&&(void 0!==n||t in e)||(e[t]=n)}function P(e,t){for(var n=e.length;n--;)if(z(e[n][0],t))return n;return-1}function H(e){return!(!J(e)||(t=e,b&&b in t))&&(function(e){var t=J(e)?k.call(e):"";return t==i||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?S:d).test(function(e){if(null!=e){try{return x.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function V(e,t,n,a){if(!J(e))return e;for(var i=-1,o=(t=function(e,t){if(B(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||W(e))return!0;return s.test(e)||!r.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return B(e)?e:Y(e)}(t)).length,l=o-1,p=e;null!=p&&++i<o;){var c=X(t[i]),d=n;if(i!=l){var u=p[c];void 0===(d=a?a(u,c,p):void 0)&&(d=J(u)?u:q(t[i+1])?[]:{})}I(p,c,d),p=p[c]}return e}function F(e,t){var n,a,i=e.__data__;return("string"==(a=typeof(n=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function R(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return H(n)?n:void 0}function q(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}C.prototype.clear=function(){this.__data__=A?A(null):{}},C.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},C.prototype.get=function(e){var t=this.__data__;if(A){var n=t[e];return n===a?void 0:n}return E.call(t,e)?t[e]:void 0},C.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:E.call(t,e)},C.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?a:t,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(e){var t=this.__data__,n=P(t,e);return!(n<0)&&(n==t.length-1?t.pop():L.call(t,n,1),!0)},O.prototype.get=function(e){var t=this.__data__,n=P(t,e);return n<0?void 0:t[n][1]},O.prototype.has=function(e){return P(this.__data__,e)>-1},O.prototype.set=function(e,t){var n=this.__data__,a=P(n,e);return a<0?n.push([e,t]):n[a][1]=t,this},j.prototype.clear=function(){this.__data__={hash:new C,map:new(T||O),string:new C}},j.prototype.delete=function(e){return F(this,e).delete(e)},j.prototype.get=function(e){return F(this,e).get(e)},j.prototype.has=function(e){return F(this,e).has(e)},j.prototype.set=function(e,t){return F(this,e).set(e,t),this};var Y=$((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(W(e))return N?N.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return l.test(e)&&n.push(""),e.replace(p,(function(e,t,a,i){n.push(a?i.replace(c,"$1"):t||e)})),n}));function X(e){if("string"==typeof e||W(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function $(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var a=arguments,i=t?t.apply(this,a):a[0],o=n.cache;if(o.has(i))return o.get(i);var r=e.apply(this,a);return n.cache=o.set(i,r),r};return n.cache=new($.Cache||j),n}function z(e,t){return e===t||e!=e&&t!=t}$.Cache=j;var B=Array.isArray;function J(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function W(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==k.call(e)}e.exports=function(e,t,n){return null==e?e:V(e,t,n)}},379:(e,t,n)=>{"use strict";var a,i=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function s(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},a=[],i=0;i<e.length;i++){var o=e[i],l=t.base?o[0]+t.base:o[0],p=n[l]||0,c="".concat(l," ").concat(p);n[l]=p+1;var d=s(c),u={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(r[d].references++,r[d].updater(u)):r.push({identifier:c,updater:v(u,t),references:1}),a.push(c)}return a}function p(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var i=n.nc;i&&(a.nonce=i)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,a){var i=n?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var o=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function h(e,t,n){var a=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var f=null,g=0;function v(e,t){var n,a,i;if(t.singleton){var o=g++;n=f||(f=p(t)),a=u.bind(null,n,o,!1),i=u.bind(null,n,o,!0)}else n=p(t),a=h.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<n.length;a++){var i=s(n[a]);r[i].references--}for(var o=l(e,t),p=0;p<n.length;p++){var c=s(n[p]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}n=o}}}}},t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={id:a,exports:{}};return e[a](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(379),t=n.n(e),a=n(910),i={insert:"head",singleton:!1};t()(a.Z,i);a.Z.locals;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){r(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function c(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var d=c(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),u=c(/Edge/i),h=c(/firefox/i),f=c(/safari/i)&&!c(/chrome/i)&&!c(/android/i),g=c(/iP(ad|od|hone)/i),v=c(/chrome/i)&&c(/android/i),m={capture:!1,passive:!1};function _(e,t,n){e.addEventListener(t,n,!d&&m)}function y(e,t,n){e.removeEventListener(t,n,!d&&m)}function w(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function b(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function x(e,t,n,a){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&w(e,t):w(e,t))||a&&e===n)return e;if(e===n)break}while(e=b(e))}return null}var E,k=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(k," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(k," ")}}function D(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||-1!==t.indexOf("webkit")||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function L(e,t){var n="";if("string"==typeof e)n=e;else do{var a=D(e,"transform");a&&"none"!==a&&(n=a+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function T(e,t,n){if(e){var a=e.getElementsByTagName(t),i=0,o=a.length;if(n)for(;i<o;i++)n(a[i],i);return a}return[]}function A(){var e=document.scrollingElement;return e||document.documentElement}function M(e,t,n,a,i){if(e.getBoundingClientRect||e===window){var o,r,s,l,p,c,u;if(e!==window&&e.parentNode&&e!==A()?(r=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,p=o.right,c=o.height,u=o.width):(r=0,s=0,l=window.innerHeight,p=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!d))do{if(i&&i.getBoundingClientRect&&("none"!==D(i,"transform")||n&&"static"!==D(i,"position"))){var h=i.getBoundingClientRect();r-=h.top+parseInt(D(i,"border-top-width")),s-=h.left+parseInt(D(i,"border-left-width")),l=r+o.height,p=s+o.width;break}}while(i=i.parentNode);if(a&&e!==window){var f=L(i||e),g=f&&f.a,v=f&&f.d;f&&(l=(r/=v)+(c/=v),p=(s/=g)+(u/=g))}return{top:r,left:s,bottom:l,right:p,width:u,height:c}}}function N(e,t,n){for(var a=P(e,!0),i=M(e)[t];a;){var o=M(a)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return a;if(a===A())break;a=P(a,!1)}return!1}function C(e,t,n){for(var a=0,i=0,o=e.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==Fe.ghost&&o[i]!==Fe.dragged&&x(o[i],n.draggable,e,!1)){if(a===t)return o[i];a++}i++}return null}function O(e,t){for(var n=e.lastElementChild;n&&(n===Fe.ghost||"none"===D(n,"display")||t&&!w(n,t));)n=n.previousElementSibling;return n||null}function j(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Fe.clone||t&&!w(e,t)||n++;return n}function I(e){var t=0,n=0,a=A();if(e)do{var i=L(e),o=i.a,r=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*r}while(e!==a&&(e=e.parentNode));return[t,n]}function P(e,t){if(!e||!e.getBoundingClientRect)return A();var n=e,a=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=D(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return A();if(a||t)return n;a=!0}}}while(n=n.parentNode);return A()}function H(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function V(e,t){return function(){if(!E){var n=arguments,a=this;1===n.length?e.call(a,n[0]):e.apply(a,n),E=setTimeout((function(){E=void 0}),t)}}}function F(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function R(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var q="Sortable"+(new Date).getTime();function Y(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==D(e,"display")&&e!==Fe.ghost){t.push({target:e,rect:M(e)});var n=l({},t[t.length-1].rect);if(e.thisAnimationDuration){var a=L(e,!0);a&&(n.top-=a.f,n.left-=a.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var a in t)if(t.hasOwnProperty(a)&&t[a]===e[n][a])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var a=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,s=M(n),l=n.prevFromRect,p=n.prevToRect,c=e.rect,d=L(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&H(l,s)&&!H(r,s)&&(c.top-s.top)/(c.left-s.left)==(r.top-s.top)/(r.left-s.left)&&(t=function(e,t,n,a){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*a.animation}(c,l,p,a.options)),H(s,r)||(n.prevFromRect=r,n.prevToRect=s,t||(t=a.options.animation),a.animate(n,c,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,a){if(a){D(e,"transition",""),D(e,"transform","");var i=L(this.el),o=i&&i.a,r=i&&i.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(r||1);e.animatingX=!!s,e.animatingY=!!l,D(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),D(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),D(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){D(e,"transition",""),D(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),a)}}}}var X=[],$={initializeByDefault:!0},z={mount:function(e){for(var t in $)$.hasOwnProperty(t)&&!(t in e)&&(e[t]=$[t]);X.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),X.push(e)},pluginEvent:function(e,t,n){var a=this;this.eventCanceled=!1,n.cancel=function(){a.eventCanceled=!0};var i=e+"Global";X.forEach((function(a){t[a.pluginName]&&(t[a.pluginName][i]&&t[a.pluginName][i](l({sortable:t},n)),t.options[a.pluginName]&&t[a.pluginName][e]&&t[a.pluginName][e](l({sortable:t},n)))}))},initializePlugins:function(e,t,n,a){for(var i in X.forEach((function(a){var i=a.pluginName;if(e.options[i]||a.initializeByDefault){var o=new a(e,t,e.options);o.sortable=e,o.options=e.options,e[i]=o,s(n,o.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var o=this.modifyOption(e,i,e.options[i]);void 0!==o&&(e.options[i]=o)}},getEventProperties:function(e,t){var n={};return X.forEach((function(a){"function"==typeof a.eventProperties&&s(n,a.eventProperties.call(t[a.pluginName],e))})),n},modifyOption:function(e,t,n){var a;return X.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(a=i.optionListeners[t].call(e[i.pluginName],n))})),a}};function B(e){var t=e.sortable,n=e.rootEl,a=e.name,i=e.targetEl,o=e.cloneEl,r=e.toEl,s=e.fromEl,p=e.oldIndex,c=e.newIndex,h=e.oldDraggableIndex,f=e.newDraggableIndex,g=e.originalEvent,v=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[q]){var _,y=t.options,w="on"+a.charAt(0).toUpperCase()+a.substr(1);!window.CustomEvent||d||u?(_=document.createEvent("Event")).initEvent(a,!0,!0):_=new CustomEvent(a,{bubbles:!0,cancelable:!0}),_.to=r||n,_.from=s||n,_.item=i||n,_.clone=o,_.oldIndex=p,_.newIndex=c,_.oldDraggableIndex=h,_.newDraggableIndex=f,_.originalEvent=g,_.pullMode=v?v.lastPutMode:void 0;var b=l({},m,z.getEventProperties(a,t));for(var x in b)_[x]=b[x];n&&n.dispatchEvent(_),y[w]&&y[w].call(t,_)}}var J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.evt,i=p(n,["evt"]);z.pluginEvent.bind(Fe)(e,t,l({dragEl:Z,parentEl:U,ghostEl:G,rootEl:K,nextEl:Q,lastDownEl:ee,cloneEl:te,cloneHidden:ne,dragStarted:ge,putSortable:le,activeSortable:Fe.active,originalEvent:a,oldIndex:ae,oldDraggableIndex:oe,newIndex:ie,newDraggableIndex:re,hideGhostForTarget:Ie,unhideGhostForTarget:Pe,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(e){W({sortable:t,name:e,originalEvent:a})}},i))};function W(e){B(l({putSortable:le,cloneEl:te,targetEl:Z,rootEl:K,oldIndex:ae,oldDraggableIndex:oe,newIndex:ie,newDraggableIndex:re},e))}var Z,U,G,K,Q,ee,te,ne,ae,ie,oe,re,se,le,pe,ce,de,ue,he,fe,ge,ve,me,_e,ye,we=!1,be=!1,xe=[],Ee=!1,ke=!1,Se=[],De=!1,Le=[],Te="undefined"!=typeof document,Ae=g,Me=u||d?"cssFloat":"float",Ne=Te&&!v&&!g&&"draggable"in document.createElement("div"),Ce=function(){if(Te){if(d)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Oe=function(e,t){var n=D(e),a=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=C(e,0,t),o=C(e,1,t),r=i&&D(i),s=o&&D(o),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+M(i).width,p=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+M(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=a&&"none"===n[Me]||o&&"none"===n[Me]&&l+p>a)?"vertical":"horizontal"},je=function(e){function t(e,n){return function(a,i,o,r){var s=a.options.group.name&&i.options.group.name&&a.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(a,i,o,r),n)(a,i,o,r);var l=(n?a:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},a=e.group;a&&"object"==o(a)||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n},Ie=function(){!Ce&&G&&D(G,"display","none")},Pe=function(){!Ce&&G&&D(G,"display","")};Te&&document.addEventListener("click",(function(e){if(be)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),be=!1,!1}),!0);var He=function(e){if(Z){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,o=e.clientY,xe.some((function(e){if(!O(e)){var t=M(e),n=e[q].options.emptyInsertThreshold,a=i>=t.left-n&&i<=t.right+n,s=o>=t.top-n&&o<=t.bottom+n;return n&&a&&s?r=e:void 0}})),r);if(t){var n={};for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[q]._onDragOver(n)}}var i,o,r},Ve=function(e){Z&&Z.parentNode[q]._isOutsideThisEl(e.target)};function Fe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=s({},t),e[q]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Oe(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Fe.supportPointer&&"PointerEvent"in window&&!f,emptyInsertThreshold:5};for(var a in z.initializePlugins(this,e,n),n)!(a in t)&&(t[a]=n[a]);for(var i in je(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Ne,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_(e,"pointerdown",this._onTapStart):(_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),xe.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),s(this,Y())}function Re(e,t,n,a,i,o,r,s){var l,p,c=e[q],h=c.options.onMove;return!window.CustomEvent||d||u?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=a,l.related=i||t,l.relatedRect=o||M(t),l.willInsertAfter=s,l.originalEvent=r,e.dispatchEvent(l),h&&(p=h.call(c,l,r)),p}function qe(e){e.draggable=!1}function Ye(){De=!1}function Xe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function $e(e){return setTimeout(e,0)}function ze(e){return clearTimeout(e)}Fe.prototype={constructor:Fe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ve=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,Z):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,a=this.options,i=a.preventOnFilter,o=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(r||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,p=a.filter;if(function(e){Le.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var a=t[n];a.checked&&Le.push(a)}}(n),!Z&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||a.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!f||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=x(s,a.draggable,n,!1))&&s.animated||ee===s)){if(ae=j(s),oe=j(s,a.draggable),"function"==typeof p){if(p.call(this,e,s,this))return W({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),J("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(p&&(p=p.split(",").some((function(a){if(a=x(l,a.trim(),n,!1))return W({sortable:t,rootEl:a,name:"filter",targetEl:s,fromEl:n,toEl:n}),J("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());a.handle&&!x(l,a.handle,n,!1)||this._prepareDragStart(e,r,s)}}},_prepareDragStart:function(e,t,n){var a,i=this,o=i.el,r=i.options,s=o.ownerDocument;if(n&&!Z&&n.parentNode===o){var l=M(n);if(K=o,U=(Z=n).parentNode,Q=Z.nextSibling,ee=n,se=r.group,Fe.dragged=Z,pe={target:Z,clientX:(t||e).clientX,clientY:(t||e).clientY},he=pe.clientX-l.left,fe=pe.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Z.style["will-change"]="all",a=function(){J("delayEnded",i,{evt:e}),Fe.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!h&&i.nativeDraggable&&(Z.draggable=!0),i._triggerDragStart(e,t),W({sortable:i,name:"choose",originalEvent:e}),S(Z,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){T(Z,e.trim(),qe)})),_(s,"dragover",He),_(s,"mousemove",He),_(s,"touchmove",He),_(s,"mouseup",i._onDrop),_(s,"touchend",i._onDrop),_(s,"touchcancel",i._onDrop),h&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Z.draggable=!0),J("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(u||d))a();else{if(Fe.eventCanceled)return void this._onDrop();_(s,"mouseup",i._disableDelayedDrag),_(s,"touchend",i._disableDelayedDrag),_(s,"touchcancel",i._disableDelayedDrag),_(s,"mousemove",i._delayedDragTouchMoveHandler),_(s,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&_(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(a,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Z&&qe(Z),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._disableDelayedDrag),y(e,"touchend",this._disableDelayedDrag),y(e,"touchcancel",this._disableDelayedDrag),y(e,"mousemove",this._delayedDragTouchMoveHandler),y(e,"touchmove",this._delayedDragTouchMoveHandler),y(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):_(document,t?"touchmove":"mousemove",this._onTouchMove):(_(Z,"dragend",this),_(K,"dragstart",this._onDragStart));try{document.selection?$e((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(we=!1,K&&Z){J("dragStarted",this,{evt:t}),this.nativeDraggable&&_(document,"dragover",Ve);var n=this.options;!e&&S(Z,n.dragClass,!1),S(Z,n.ghostClass,!0),Fe.active=this,e&&this._appendGhost(),W({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,Ie();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(Z.parentNode[q]._isOutsideThisEl(e),t)do{if(t[q]){if(t[q]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Pe()}},_onTouchMove:function(e){if(pe){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=G&&L(G,!0),r=G&&o&&o.a,s=G&&o&&o.d,l=Ae&&ye&&I(ye),p=(i.clientX-pe.clientX+a.x)/(r||1)+(l?l[0]-Se[0]:0)/(r||1),c=(i.clientY-pe.clientY+a.y)/(s||1)+(l?l[1]-Se[1]:0)/(s||1);if(!Fe.active&&!we){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(G){o?(o.e+=p-(de||0),o.f+=c-(ue||0)):o={a:1,b:0,c:0,d:1,e:p,f:c};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");D(G,"webkitTransform",d),D(G,"mozTransform",d),D(G,"msTransform",d),D(G,"transform",d),de=p,ue=c,ce=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!G){var e=this.options.fallbackOnBody?document.body:K,t=M(Z,!0,Ae,!0,e),n=this.options;if(Ae){for(ye=e;"static"===D(ye,"position")&&"none"===D(ye,"transform")&&ye!==document;)ye=ye.parentNode;ye!==document.body&&ye!==document.documentElement?(ye===document&&(ye=A()),t.top+=ye.scrollTop,t.left+=ye.scrollLeft):ye=A(),Se=I(ye)}S(G=Z.cloneNode(!0),n.ghostClass,!1),S(G,n.fallbackClass,!0),S(G,n.dragClass,!0),D(G,"transition",""),D(G,"transform",""),D(G,"box-sizing","border-box"),D(G,"margin",0),D(G,"top",t.top),D(G,"left",t.left),D(G,"width",t.width),D(G,"height",t.height),D(G,"opacity","0.8"),D(G,"position",Ae?"absolute":"fixed"),D(G,"zIndex","100000"),D(G,"pointerEvents","none"),Fe.ghost=G,e.appendChild(G),D(G,"transform-origin",he/parseInt(G.style.width)*100+"% "+fe/parseInt(G.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,a=e.dataTransfer,i=n.options;J("dragStart",this,{evt:e}),Fe.eventCanceled?this._onDrop():(J("setupClone",this),Fe.eventCanceled||((te=R(Z)).draggable=!1,te.style["will-change"]="",this._hideClone(),S(te,this.options.chosenClass,!1),Fe.clone=te),n.cloneId=$e((function(){J("clone",n),Fe.eventCanceled||(n.options.removeCloneOnHide||K.insertBefore(te,Z),n._hideClone(),W({sortable:n,name:"clone"}))})),!t&&S(Z,i.dragClass,!0),t?(be=!0,n._loopId=setInterval(n._emulateDragOver,50)):(y(document,"mouseup",n._onDrop),y(document,"touchend",n._onDrop),y(document,"touchcancel",n._onDrop),a&&(a.effectAllowed="move",i.setData&&i.setData.call(n,a,Z)),_(document,"drop",n),D(Z,"transform","translateZ(0)")),we=!0,n._dragStartId=$e(n._dragStarted.bind(n,t,e)),_(document,"selectstart",n),ge=!0,f&&D(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,a,i,o=this.el,r=e.target,s=this.options,p=s.group,c=Fe.active,d=se===p,u=s.sort,h=le||c,f=this,g=!1;if(!De){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=x(r,s.draggable,o,!0),P("dragOver"),Fe.eventCanceled)return g;if(Z.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||f._ignoreWhileAnimating===r)return V(!1);if(be=!1,c&&!s.disabled&&(d?u||(a=!K.contains(Z)):le===this||(this.lastPutMode=se.checkPull(this,c,Z,e))&&p.checkPut(this,c,Z,e))){if(i="vertical"===this._getDirection(e,r),t=M(Z),P("dragOverValid"),Fe.eventCanceled)return g;if(a)return U=K,H(),this._hideClone(),P("revert"),Fe.eventCanceled||(Q?K.insertBefore(Z,Q):K.appendChild(Z)),V(!0);var v=O(o,s.draggable);if(!v||function(e,t,n){var a=M(O(n.el,n.options.draggable)),i=10;return t?e.clientX>a.right+i||e.clientX<=a.right&&e.clientY>a.bottom&&e.clientX>=a.left:e.clientX>a.right&&e.clientY>a.top||e.clientX<=a.right&&e.clientY>a.bottom+i}(e,i,this)&&!v.animated){if(v===Z)return V(!1);if(v&&o===e.target&&(r=v),r&&(n=M(r)),!1!==Re(K,o,Z,t,r,n,e,!!r))return H(),o.appendChild(Z),U=o,R(),V(!0)}else if(r.parentNode===o){n=M(r);var m,_,y,w=Z.parentNode!==o,b=!function(e,t,n){var a=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,r=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return a===r||i===s||a+o/2===r+l/2}(Z.animated&&Z.toRect||t,r.animated&&r.toRect||n,i),E=i?"top":"left",k=N(r,"top","top")||N(Z,"top","top"),L=k?k.scrollTop:void 0;if(ve!==r&&(_=n[E],Ee=!1,ke=!b&&s.invertSwap||w),0!==(m=function(e,t,n,a,i,o,r,s){var l=a?e.clientY:e.clientX,p=a?n.height:n.width,c=a?n.top:n.left,d=a?n.bottom:n.right,u=!1;if(!r)if(s&&_e<p*i){if(!Ee&&(1===me?l>c+p*o/2:l<d-p*o/2)&&(Ee=!0),Ee)u=!0;else if(1===me?l<c+_e:l>d-_e)return-me}else if(l>c+p*(1-i)/2&&l<d-p*(1-i)/2)return function(e){return j(Z)<j(e)?1:-1}(t);if((u=u||r)&&(l<c+p*o/2||l>d-p*o/2))return l>c+p/2?1:-1;return 0}(e,r,n,i,b?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,ke,ve===r))){var T=j(Z);do{T-=m,y=U.children[T]}while(y&&("none"===D(y,"display")||y===G))}if(0===m||y===r)return V(!1);ve=r,me=m;var A=r.nextElementSibling,C=!1,I=Re(K,o,Z,t,r,n,e,C=1===m);if(!1!==I)return 1!==I&&-1!==I||(C=1===I),De=!0,setTimeout(Ye,30),H(),C&&!A?o.appendChild(Z):r.parentNode.insertBefore(Z,C?A:r),k&&F(k,0,L-k.scrollTop),U=Z.parentNode,void 0===_||ke||(_e=Math.abs(_-M(r)[E])),R(),V(!0)}if(o.contains(Z))return V(!1)}return!1}function P(s,p){J(s,f,l({evt:e,isOwner:d,axis:i?"vertical":"horizontal",revert:a,dragRect:t,targetRect:n,canSort:u,fromSortable:h,target:r,completed:V,onMove:function(n,a){return Re(K,o,Z,t,n,M(n),e,a)},changed:R},p))}function H(){P("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function V(t){return P("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(f),f!==h&&(S(Z,le?le.options.ghostClass:c.options.ghostClass,!1),S(Z,s.ghostClass,!0)),le!==f&&f!==Fe.active?le=f:f===Fe.active&&le&&(le=null),h===f&&(f._ignoreWhileAnimating=r),f.animateAll((function(){P("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===Z&&!Z.animated||r===o&&!r.animated)&&(ve=null),s.dragoverBubble||e.rootEl||r===document||(Z.parentNode[q]._isOutsideThisEl(e.target),!t&&He(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function R(){ie=j(Z),re=j(Z,s.draggable),W({sortable:f,name:"change",toEl:o,newIndex:ie,newDraggableIndex:re,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){y(document,"mousemove",this._onTouchMove),y(document,"touchmove",this._onTouchMove),y(document,"pointermove",this._onTouchMove),y(document,"dragover",He),y(document,"mousemove",He),y(document,"touchmove",He)},_offUpEvents:function(){var e=this.el.ownerDocument;y(e,"mouseup",this._onDrop),y(e,"touchend",this._onDrop),y(e,"pointerup",this._onDrop),y(e,"touchcancel",this._onDrop),y(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;ie=j(Z),re=j(Z,n.draggable),J("drop",this,{evt:e}),U=Z&&Z.parentNode,ie=j(Z),re=j(Z,n.draggable),Fe.eventCanceled||(we=!1,ke=!1,Ee=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ze(this.cloneId),ze(this._dragStartId),this.nativeDraggable&&(y(document,"drop",this),y(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),f&&D(document.body,"user-select",""),D(Z,"transform",""),e&&(ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(K===U||le&&"clone"!==le.lastPutMode)&&te&&te.parentNode&&te.parentNode.removeChild(te),Z&&(this.nativeDraggable&&y(Z,"dragend",this),qe(Z),Z.style["will-change"]="",ge&&!we&&S(Z,le?le.options.ghostClass:this.options.ghostClass,!1),S(Z,this.options.chosenClass,!1),W({sortable:this,name:"unchoose",toEl:U,newIndex:null,newDraggableIndex:null,originalEvent:e}),K!==U?(ie>=0&&(W({rootEl:U,name:"add",toEl:U,fromEl:K,originalEvent:e}),W({sortable:this,name:"remove",toEl:U,originalEvent:e}),W({rootEl:U,name:"sort",toEl:U,fromEl:K,originalEvent:e}),W({sortable:this,name:"sort",toEl:U,originalEvent:e})),le&&le.save()):ie!==ae&&ie>=0&&(W({sortable:this,name:"update",toEl:U,originalEvent:e}),W({sortable:this,name:"sort",toEl:U,originalEvent:e})),Fe.active&&(null!=ie&&-1!==ie||(ie=ae,re=oe),W({sortable:this,name:"end",toEl:U,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){J("nulling",this),K=Z=U=G=Q=te=ee=ne=pe=ce=ge=ie=re=ae=oe=ve=me=le=se=Fe.dragged=Fe.ghost=Fe.clone=Fe.active=null,Le.forEach((function(e){e.checked=!0})),Le.length=de=ue=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Z&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,i=n.length,o=this.options;a<i;a++)x(e=n[a],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Xe(e));return t},sort:function(e,t){var n={},a=this.el;this.toArray().forEach((function(e,t){var i=a.children[t];x(i,this.options.draggable,a,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(a.removeChild(n[e]),a.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return x(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var a=z.modifyOption(this,e,t);n[e]=void 0!==a?a:t,"group"===e&&je(n)},destroy:function(){J("destroy",this);var e=this.el;e[q]=null,y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart),y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),xe.splice(xe.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ne){if(J("hideClone",this),Fe.eventCanceled)return;D(te,"display","none"),this.options.removeCloneOnHide&&te.parentNode&&te.parentNode.removeChild(te),ne=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ne){if(J("showClone",this),Fe.eventCanceled)return;Z.parentNode!=K||this.options.group.revertClone?Q?K.insertBefore(te,Q):K.appendChild(te):K.insertBefore(te,Z),this.options.group.revertClone&&this.animate(Z,te),D(te,"display",""),ne=!1}}else this._hideClone()}},Te&&_(document,"touchmove",(function(e){(Fe.active||we)&&e.cancelable&&e.preventDefault()})),Fe.utils={on:_,off:y,css:D,find:T,is:function(e,t){return!!x(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:V,closest:x,toggleClass:S,clone:R,index:j,nextTick:$e,cancelNextTick:ze,detectDirection:Oe,getChild:C},Fe.get=function(e){return e[q]},Fe.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Fe.utils=l({},Fe.utils,e.utils)),z.mount(e)}))},Fe.create=function(e,t){return new Fe(e,t)},Fe.version="1.13.0";var Be,Je,We,Ze,Ue,Ge,Ke=[],Qe=!1;function et(){Ke.forEach((function(e){clearInterval(e.pid)})),Ke=[]}function tt(){clearInterval(Ge)}var nt=V((function(e,t,n,a){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,p=A(),c=!1;Je!==n&&(Je=n,et(),Be=t.scroll,i=t.scrollFn,!0===Be&&(Be=P(n,!0)));var d=0,u=Be;do{var h=u,f=M(h),g=f.top,v=f.bottom,m=f.left,_=f.right,y=f.width,w=f.height,b=void 0,x=void 0,E=h.scrollWidth,k=h.scrollHeight,S=D(h),L=h.scrollLeft,T=h.scrollTop;h===p?(b=y<E&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),x=w<k&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(b=y<E&&("auto"===S.overflowX||"scroll"===S.overflowX),x=w<k&&("auto"===S.overflowY||"scroll"===S.overflowY));var N=b&&(Math.abs(_-o)<=s&&L+y<E)-(Math.abs(m-o)<=s&&!!L),C=x&&(Math.abs(v-r)<=s&&T+w<k)-(Math.abs(g-r)<=s&&!!T);if(!Ke[d])for(var O=0;O<=d;O++)Ke[O]||(Ke[O]={});Ke[d].vx==N&&Ke[d].vy==C&&Ke[d].el===h||(Ke[d].el=h,Ke[d].vx=N,Ke[d].vy=C,clearInterval(Ke[d].pid),0==N&&0==C||(c=!0,Ke[d].pid=setInterval(function(){a&&0===this.layer&&Fe.active._onTouchMove(Ue);var t=Ke[this.layer].vy?Ke[this.layer].vy*l:0,n=Ke[this.layer].vx?Ke[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(Fe.dragged.parentNode[q],n,t,e,Ue,Ke[this.layer].el)||F(Ke[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&u!==p&&(u=P(u,!1)));Qe=c}}),30),at=function(e){var t=e.originalEvent,n=e.putSortable,a=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,r=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;r();var p=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(p.clientX,p.clientY);s(),l&&!l.el.contains(c)&&(o("spill"),this.onSpill({dragEl:a,putSortable:n}))}};function it(){}function ot(){}it.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var a=C(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(t,a):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:at},s(it,{pluginName:"revertOnSpill"}),ot.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:at},s(ot,{pluginName:"removeOnSpill"});Fe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_(document,"pointermove",this._handleFallbackAutoScroll):t.touches?_(document,"touchmove",this._handleFallbackAutoScroll):_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):(y(document,"pointermove",this._handleFallbackAutoScroll),y(document,"touchmove",this._handleFallbackAutoScroll),y(document,"mousemove",this._handleFallbackAutoScroll)),tt(),et(),clearTimeout(E),E=void 0},nulling:function(){Ue=Je=Be=Qe=Ge=We=Ze=null,Ke.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(a,i);if(Ue=e,t||u||d||f){nt(e,this.options,o,t);var r=P(o,!0);!Qe||Ge&&a===We&&i===Ze||(Ge&&tt(),Ge=setInterval((function(){var o=P(document.elementFromPoint(a,i),!0);o!==r&&(r=o,et()),nt(e,n.options,o,t)}),10),We=a,Ze=i)}else{if(!this.options.bubbleScroll||P(o,!0)===A())return void et();nt(e,this.options,P(o,!1),!1)}}},s(e,{pluginName:"scroll",initializeByDefault:!0})}),Fe.mount(ot,it);const rt=Fe;var st=n(208),lt=n.n(st),pt=n(468),ct=n.n(pt);class dt{constructor(e,t){this.exp=e||"",this.data=t||!1,this.type="",this.matches=[],this.regex={comparison_class:/\{\s*'([a-zA-Z0-9._\s\[\]\-]+)'\s*\:\s*([a-zA-Z0-9._\s\[\]\/']+)\s*([!=<>+]+)*\s*([a-zA-Z0-9._\s\[\]\/']+)*\s*\}/,comparison_function:/\{\s*'([a-zA-Z0-9._\[\]\-]+)'\s*\:\s*([a-zA-Z0-9._\[\]]+)\((.*?)\)\s*\}/,comparison_operator:/^([a-zA-Z0-9._\[\]()!]+)\s*(!=|==|===|>|>=|<|<=)\s*(\'[a-zA-Z0-9._!\s]+\'|[a-zA-Z0-9._\[\]()!]+)/,statement:/^(\'[a-zA-Z0-9._!\-\s]+\'|[a-zA-Z0-9._\[\]()!]+)\s*(\=)\s*(\'[a-zA-Z0-9._!\-\s]+\'|[a-zA-Z0-9._\[\]()!]+)/,function:/([a-zA-Z0-9._\[\]]+)\((.*?)\)/,concatenation:/^([\w\d\s._']+)\s*\+\s*([\w\d\s._']+)/,for_loop:/^([a-zA-Z0-9._]+)\s+in\s+([a-zA-Z0-9._()\[\]]+)$/,parent_var:/\{\{parent\.([a-zA-Z0-9._()\[\]]+)\}\}/,object_reference:/^[a-zA-Z_][a-zA-Z0-9\[\]._]+$/,string:/^\'(.*?)\'$/,tel:/^[0+]/,number:/^\d+$/,boolean:/^(true|false)$/},this.parseExp()}parseExp(){this.exp&&(this.exp.match(this.regex.comparison_class)?(this.type="comparison_class",this.matches=this.exp.match(this.regex.comparison_class)):this.exp.match(this.regex.comparison_operator)?(this.type="comparison_operator",this.matches=this.exp.match(this.regex.comparison_operator)):this.exp.match(this.regex.comparison_function)?(this.type="comparison_function",this.matches=this.exp.match(this.regex.comparison_function)):this.exp.match(this.regex.statement)?(this.type="statement",this.matches=this.exp.match(this.regex.statement)):this.exp.match(this.regex.function)?(this.type="function_call",this.matches=this.exp.match(this.regex.function)):this.exp.match(this.regex.for_loop)?(this.type="for_loop",this.matches=this.exp.match(this.regex.for_loop)):this.exp.match(this.regex.parent_var)?(this.type="parent_var",this.matches=this.exp.match(this.regex.parent_var)):this.exp.match(this.regex.object_reference)?(this.type="object_reference",this.matches=this.exp.match(this.regex.object_reference)):this.exp.match(this.regex.concatenation)?(this.type="concatenation",this.matches=this.exp.match(this.regex.concatenation)):this.exp.match(this.regex.string)&&(this.type="string",this.matches=this.exp.match(this.regex.string)))}findObjRef(){let e=[],t=this,n=this.matches.map((e=>("string"==typeof e&&(e=e.trim()),e))).filter((n=>{if(void 0===n||null==n)return!1;if(t.regex.function.test(n)){let i=n.match(t.regex.function,"i");if(i[1]&&e.push(i[1]),i[2]){i=i[2].split(",");for(var a=0;a<i.length;a++)i[a]=i[a].trim(),t.regex.object_reference.test(i[a])&&e.push(i[a])}}return t.regex.object_reference.test(n)&&"string"==typeof n&&"false"!=n&&"true"!=n}));return e=[...n,...e],"function_call"==this.type&&e.splice(0,1),e}value(e){return!(!this.type||!this[this.type])&&this[this.type](e)}getValue(e){let t=!1,n=!1;if("string"==typeof e&&e.match(/\.length$/)&&(e=e.replace(/\.length$/,""),n=!0),"string"==typeof e&&e.match(/^\!/)&&(e=e.replace(/^\!/,""),t=!0),void 0===e)return!1;e=e.trim();let a=!1;return this.regex.number.test(e)?a=e=parseFloat(e):"string"==this.type||this.regex.string.test(e)?a=e.replace(this.regex.string,"$1"):!this.regex.tel.test(e)&&this.regex.number.test(e)?a=parseFloat(e):this.regex.boolean.test(e)?a="true"===e:"object"==typeof this.data?a=lt()(this.data,e):"string"!=typeof this.data&&this.data||(a=lt()(window.scope,e)),!this.regex.tel.test(a)&&"string"==typeof a&&this.regex.number.test(a)&&(a=parseFloat(a)),!0===t&&(a=!a),!0===n&&void 0!==a?a.length:a}setValue(e,t){let n=lt()(window.scope,e);ct()(window.scope,e,t);return view.update(e),"object"==typeof t&&view.updateChildren(e,t),"function"==typeof window.watch[e]&&window.watch[e].call("",t,n),lt()(window.scope,e)}comparison_operator(){let e=this.getValue(this.matches[1]),t=this.matches[2],n=this.getValue(this.matches[3]);return!(t||!e)||("=="==t&&e==n||("==="==t&&e===n||("!="==t&&e!=n||("!=="==t&&e!==n||(">"==t&&e>n||("<"==t&&e<n||(">="==t&&e>=n||"<="==t&&e<=n)))))))}statement(){let e=this.matches[1],t=this.matches[2],n=this.getValue(this.matches[3]);return"="==t&&this.setValue(e,n),!0}function_call(e){let t=this.matches[2].split(/\s*,\s*/),n=this,a=!1;return e||(e={}),t&&"object"==typeof t&&(e._params=JSON.parse(JSON.stringify(t))),t=t.map(((e,t)=>n.getValue(e.trim()))),"function"==typeof window.scope[this.matches[1]]?(a=window.scope[this.matches[1]].apply(e,t),a):a}comparison_function(e){let t=this.matches[3].split(/\s*,\s*/),n=this;t=t.map(((e,t)=>n.getValue(e.trim())));let a=!1;return window.scope[this.matches[2]]&&(a=window.scope[this.matches[2]].apply(e,t)),[this.matches[1],a]}comparison_class(){let e=this.getValue(this.matches[2]),t=this.matches[3],n=this.getValue(this.matches[4]);return!t&&e||"=="==t&&e==n||"==="==t&&e===n||"!="==t&&e!=n||"!=="==t&&e!==n||">"==t&&e>n||"<"==t&&e<n||">="==t&&e>=n||"<="==t&&e<=n?[this.matches[1],e]:"+"==t&&[this.matches[1],e+n]}concatenation(){let e=this.exp.split(/\s*\+\s*/);return e=e.map((e=>this.getValue(e))),e.join("")}object_reference(){return this.getValue(this.matches[0])}safeEval(e){}}var ut=n(733),ht=n.n(ut);const ft=(e,t)=>{let n=new Evaluate(e._app.show.exp).value();e._app.show.orig_display||(e._app.show.orig_display=window.getComputedStyle(e,null).display,"none"==e._app.show.orig_display&&(e.classList.contains("flex")?e._app.show.orig_display="flex":e.classList.contains("inline-flex")?e._app.show.orig_display="inline-flex":e.classList.contains("inline-block")?e._app.show.orig_display="inline-block":e.classList.contains("inline")?e._app.show.orig_display="inline":e._app.show.orig_display="block")),n&&0!=n?view.enterView(e):view.exitView(e)},gt=(e,t)=>{let n=new Evaluate(e._app.hide.exp).value();e._app.hide.orig_display?n&&0!=n?view.exitView(e):view.enterView(e):(e._app.hide.orig_display=window.getComputedStyle(e,null).display,"none"==e._app.hide.orig_display&&(e.classList.contains("flex")?e._app.hide.orig_display="flex":e.classList.contains("inline-flex")?e._app.hide.orig_display="inline-flex":e.classList.contains("inline-block")?e._app.hide.orig_display="inline-block":e.classList.contains("inline")?e._app.hide.orig_display="inline":e._app.hide.orig_display="block"),e.style.display=n&&0!=n?"none":e._app.hide.orig_display)},vt=(e,t)=>{let n=new Evaluate(e._app.checked.exp).value();e.checked=!(!n||!0!==n)},mt=(e,t)=>{if(t){if("file"==t.type)return!1;let e=evaluate.getValue(t._app.model.keys[0]);"checkbox"==t.type?(void 0===e&&(e=!1),t.checked=e):"DIV"==t.tagName?(void 0===e&&(e=""),t.innerHTML=e):(void 0===e&&(e=null),t.value=e)}else{let t,a=e.target;if("file"==a.type){var n=a.files[0];if("object"==typeof n&&"string"==typeof n.type){let e=new FileReader;e.onload=function(t){var n=new Image;n.src=e.result,a._app&&a._app.model&&a._app.model.exp&&evaluate.setValue(a._app.model.exp,n.src),a._app&&a._app.change&&a._app.change.exp&&new Evaluate(a._app.change.exp).value(a)},e.readAsDataURL(n)}}else t="checkbox"==a.type?a.checked:"DIV"==a.tagName?a.innerHTML:a.value;a._app.model&&evaluate.setValue(a._app.model.keys[0],t)}};var _t=n(671),yt=n.n(_t);const wt=(e,t)=>new Promise((async(t,n)=>{if(window.update_loops.hasOwnProperty(e._app.for.scope_obj)&&window.update_loops[e._app.for.scope_obj]==e)return void console.log(e._app.for.scope_obj+" in progress");if(window.update_loops[e._app.for.scope_obj]=e,e._app.for.children?e._app.for.children=e._app.for.children.filter((e=>(e.remove(),!1))):e._app.for.children=[],e._app.for.data=evaluate.getValue(e._app.for.scope_obj),!e._app.for.data||0==e._app.for.data.length)return delete window.update_loops[e._app.for.scope_obj],!1;let a=e.cloneNode(!0);a.removeAttribute("app-for"),a.removeEventListener("mouseup",yt()),function(e,t,n){n+="[i]";let a=new RegExp(t+"(?=([^']*'[^']*')*[^']*$)");return new Promise(((t,i)=>{e.forEach(((i,o)=>{if(i.attributes.length>0)for(var r=0;r<i.attributes.length;r++)if(i.attributes[r].nodeName.startsWith(app.prefix)){var s=i.attributes[r];s.nodeValue=s.nodeValue.replace(a,n)}o>=e.length-1&&t(e)}))}))}([a,...a.querySelectorAll(":scope *")],e._app.for.obj,e._app.for.scope_obj).then((t=>{if("object"==typeof e._app.for.data&&e._app.for.data.length>0){let n=e._app.for.parent;!function a(i,o){let r=t[0].cloneNode(!0);r=[r,...r.querySelectorAll(":scope *")];let s=0==o,l=o==e._app.for.data.length-1;(function(e,t,n,a,i){return new Promise(((o,r)=>{t.forEach(((r,s)=>{if(r.attributes.length>0)for(var l=0;l<r.attributes.length;l++){if(r.attributes[l].nodeName.startsWith(app.prefix)){if(r.attributes[l].nodeValue=r.attributes[l].nodeValue.replace(/\[[0-9i]+\]/,"["+n+"]").replace(/\$index/g,n).replace(/\$first/g,a).replace(/\$last/g,i),"app-if"==r.attributes[l].nodeName){if(!1===new Evaluate(r.attributes[l].nodeValue).value()){r.remove();continue}}r._app||(r._app={keys:[e]}),r._app.scope_obj=e,new Index(r.attributes[l].nodeValue,r,r.attributes[l].nodeName,n)}t.length}s>=t.length-1&&o(t)}))}))})(e._app.for.scope_obj,r,o,s,l).then((t=>{n.appendChild(t[0]),e._app.for.children.push(t[0]),++o<i.length?a(i,o):(delete window.update_loops[e._app.for.scope_obj],view.update(e._app.for.scope_obj,!0))}))}(e._app.for.data,0)}}))}));var bt=n(117),xt=n.n(bt),Et=n(955),kt=n.n(Et),St=n(715),Dt=n.n(St),Lt=n(745),Tt=n.n(Lt),At=n(211),Mt=n.n(At),Nt=n(72),Ct=n.n(Nt),Ot=n(459),jt=n.n(Ot),It=n(841),Pt=n.n(It);class Ht{set(e,t){evaluate.setValue(e,t)}get(e){return evaluate.getValue(e)}update(e,t){for(var n=-1,a=0;a<window.update_queue.length;a++)if(window.update_queue[a].key==e){n=a;break}n<0&&window.update_queue.push({key:e,value:t}),!1===window.update_queue_processing&&this.processUpdateQueue()}processUpdateQueue(){window.update_queue.length>0?(window.update_queue_processing=!0,this.processUpdate(window.update_queue[0].key,window.update_queue[0].value)):window.update_queue_processing=!1}processUpdate(e,t){if(!0===t);else{window.app.for.filter((t=>"init"==e||("string"==typeof e?t.keys.indexOf(e)>=0:void 0))).map((e=>(wt(e.el,!0),e))).length}if(this.isArray(e))app.index[e]=app.index[e].filter(((t,n)=>!(!t.el.parentNode&&"if"!=t.type)&&(this.updateElement(t.el,e,t.type),!0)));else if("object"==typeof e&&Array.isArray(e))e.map(((t,n)=>{this.update(t.replace(/\'/g,""),e,t.type)}));else if("object"==typeof e&&e._params&&Array.isArray(e._params))e._params.map(((t,n)=>{this.update(t.replace(/\'/g,""),e,t.type)}));else if("init"==e)for(e in app.index)evaluate.getValue(e)&&(app.index[e]=app.index[e].filter(((t,n)=>!(!t.el.parentNode&&"for"!=t.type&&"if"!=t.type)&&(this.updateElement(t.el,e,t.type),!0))));else for(var e in app.index)app.index[e]=app.index[e].filter(((t,n)=>!(!t.el.parentNode&&"if"!=t.type)&&(this.updateElement(t.el,e,t.type),!0)));window.update_queue.splice(0,1),this.processUpdateQueue()}updateChildren(e,t){for(let n in t){let a=index.parsePath([e,n]);a=index.parseKey(a),"object"==typeof t[n]&&this.updateChildren(a,t[n]),this.update(a)}}async updateElement(e,t,n){if("model"==n&&e._app.model&&e._app.model.keys.indexOf(t)>=0&&(e._app.model.listening||("INPUT"==e.tagName&&("text"!=e.type&&"number"!=e.type&&"password"!=e.type&&"email"!=e.type&&"tel"!=e.type||(e.removeEventListener("keyup",mt),e.addEventListener("keyup",mt)),"number"!=e.type&&"file"!=e.type&&"range"!=e.type&&"color"!=e.type||(e.removeEventListener("change",mt),e.addEventListener("change",mt)),"checkbox"!=e.type&&"radio"!=e.type||(e.removeEventListener("click",mt),e.addEventListener("click",mt))),"TEXTAREA"==e.tagName&&(e.removeEventListener("keyup",mt),e.addEventListener("keyup",mt)),"SELECT"==e.tagName&&(e.removeEventListener("change",mt),e.addEventListener("change",mt)),"DIV"!=e.tagName&&"PRE"!=e.tagName&&"CODE"!=e.tagName||(e.removeEventListener("paste",Tt()),e.addEventListener("paste",Tt()),e.removeEventListener("input",mt),e.addEventListener("input",mt)),e._app.model.listening=!0),window.typing||mt(!1,e)),"change"==n&&e._app.change&&(e._app.change.listening||("INPUT"==e.tagName&&("text"!=e.type&&"number"!=e.type&&"password"!=e.type&&"email"!=e.type&&"tel"!=e.type||(e.removeEventListener("keyup",Mt()),e.addEventListener("keyup",Mt())),"number"!=e.type&&"file"!=e.type&&"range"!=e.type&&"color"!=e.type||(e.removeEventListener("change",Mt()),e.addEventListener("change",Mt())),"checkbox"!=e.type&&"radio"!=e.type||(e.removeEventListener("click",Mt()),e.addEventListener("click",Mt()))),"TEXTAREA"==e.tagName&&(e.removeEventListener("keyup",Mt()),e.addEventListener("keyup",Mt())),"SELECT"==e.tagName&&(e.removeEventListener("change",Mt()),e.addEventListener("change",Mt())),"DIV"!=e.tagName&&"PRE"!=e.tagName&&"CODE"!=e.tagName||(e.removeEventListener("input",Mt()),e.addEventListener("input",Mt())),e._app.change.listening=!0)),"dragstart"==n&&e._app.dragstart&&e._app.dragstart.keys.indexOf(t)>=0&&(e._app.dragstart.listening||(e.setAttribute("draggable","true"),e.removeEventListener("dragstart",kt()),e.addEventListener("dragstart",kt()),e._app.dragstart.listening=!0)),("drag"==n&&e._app.drag&&e._app.drag.keys.indexOf(t)>=0||e._app.dragend&&e._app.dragend.keys.indexOf(t)>=0)&&(e._app.drag.listening||(e.setAttribute("draggable","true"),e.removeEventListener("dragend",xt()),e.addEventListener("dragend",xt()),e._app.drag.listening=!0)),"drop"==n&&e._app.drop&&e._app.drop.keys.indexOf(t)>=0&&(e._app.drop.listening||(e.removeEventListener("drop",Dt()),e.addEventListener("drop",Dt()),e.addEventListener("dragenter",(function(e){e.target.classList.add("dropping")}),!1),e.addEventListener("dragleave",(function(e){e.target.classList.remove("dropping")}),!1),e._app.drop.listening=!0)),"class"==n&&e._app.class&&Ct()(e),"bind"==n&&e._app.bind&&ht()(e),"click"==n&&e._app.click&&(e._app.click.listening||(e.removeEventListener("click",yt()),e.addEventListener("click",yt()),e._app.click.listening=!0)),"paste"==n&&e._app.paste&&(e._app.paste.listening||(e.removeEventListener("paste",Tt()),e.addEventListener("paste",Tt()),e._app.paste.listening=!0)),"if"==n&&e._app.if,"show"==n&&e._app.show&&ft(e),"hide"==n&&e._app.hide&&gt(e),"checked"==n&&e._app.checked&&vt(e),"src"==n&&e._app.src&&jt()(e),"attr"==n&&e._app.attr&&Pt()(e),window.watch&&window.watch[t]&&"function"==typeof window.watch[t]){let e,n=evaluate.getValue(t);window.watch[t].call(null,n,e,t)}}enterView(e){if(e)return new Promise((function(t,n){let a="block";e._app&&e._app.show&&e._app.show.orig_display&&(a=e._app.show.orig_display),e._app&&e._app.hide&&e._app.hide.orig_display&&(a=e._app.hide.orig_display),e.classList.contains("animate")?(e.style.display=a,setTimeout((function(){e.classList.add("in-view"),e.classList.remove("exit-view")}),200)):e.style.display=a,t()}))}exitView(e){if(e)return new Promise((function(t,n){e.classList.contains("animate")?(e.classList.remove("in-view"),e.classList.add("exit-view"),setTimeout((function(){e.style.display="none"}),1e3)):e.style.display="none",t()}))}domSearch(e,t,n){if(n||(n=[]),!e.children)throw new Error("Starting node must be an element or document");if(t(e)&&n.push(e),e.children&&e.children.length){let a=this;Array.prototype.forEach.call(e.children,(function(e){a.domSearch(e,t,n)}))}return n}isArray(e){return Array.isArray(app.index[e])}isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}}var Vt=n(314),Ft=n.n(Vt);class Rt{constructor(e,t,n,a){let i=!1;if(!(e&&t&&n))return!1;t&&!t._app&&(t._app={keys:[],renders:{}}),parseInt(a)>=0&&(t._app.index=a),n=this.parseType(n),e&&e.match(/length/)&&(e=e.replace(".length",""),i=!0);let o=this.getKeys(e);if(t._app.keys=t._app.keys.concat(o.keys),"for"==n){let a=this.parseAppFor(e);t._app.keys.push(a[1]),t._app[n]=e,t._app.for={keys:o.keys,key_type:o.key_type,obj:a[0],scope_obj:a[1],children:[],parent:t.parentNode},t.remove(),window.app.for.push({el:t,keys:o.keys})}else"attr"==n?t._app.attr={exp:e,key_type:o.key_type,keys:o.keys.splice(1,1),attr_name:o.keys[0]}:"if"==n?t._app[n]={exp:e,key_type:o.key_type,keys:o.keys,parent:t.parentNode,parent_index:Array.from(t.parentNode.childNodes).indexOf(t)}:(0==o.keys.length&&t._app.scope_obj&&(o.keys=[t._app.scope_obj]),t._app[n]={exp:e,key_type:o.key_type,keys:o.keys});if("function_call"==t._app[n].key_type){let n=e.match(evaluate.regex.function);t._app.functionCall={name:n[1],params:n[2]}}"click"==n&&(t.removeEventListener("click",yt()),t.addEventListener("click",yt())),"init"==n&&window.app.init.push(t),!0===i&&(t._app[n].exp=t._app[n].exp+".length"),t._app.keys.map((e=>{let a=e;if(e.match(/\./))for(;a.match(/\./);){a=a.replace(/\[[0-9]+\]/,"").split("."),a.length>1&&(a.pop(),a=a.join(".")),app.index[a]||(app.index[a]=[]);let e={el:t,key:a,type:n},i=app.index[a].findIndex((e=>e.el===t&&e.type==n));i>=0?app.index[a][i].el=t:app.index[a].push(e),t._app[n].keys||(t._app[n].keys=[]),t._app[n].keys.push(a)}app.index[e]||(app.index[e]=[]);let i={el:t,key:e,type:n},o=app.index[e].findIndex((e=>e.el===t&&e.type==n));o>=0?app.index[e][o].el=t:app.index[e].push(i)})),this.el=t._app}init(e){e.apply(this)}getKeys(e){let t=new Evaluate(e),n=t.type;return t=t.findObjRef(),{keys:t,key_type:n}}isObjKey(e){return"string"==typeof e&&e.match(evaluate.regex.object_reference)}getElements(e){return app.index[e]}findElement(e,t){return app.index[e].filter((e=>e.el==t))}deIndex(e){e._app.keys.forEach(((e,t)=>{app.index[e]&&app.index[e].filter(((e,t)=>e.el._app.hasOwnProperty("for")))})),e.remove()}parseType(e){return"string"==typeof e&&e.replace(app.prefix,"")}parseKey(e,t){return e=t?e.replace(/\.([0-9]+)./g,"[$1].").replace(/\.([0-9]+)$/g,"[$1]"):e}parseAppFor(e){return e.split(/\s+in\s+/)}parseFunctionCall(e){e.match(evaluate.regex.functionCall)}parsePath(e){let t="";return e.map((e=>{!isNaN(e)||"string"==typeof e&&e.match(/^[0-9]+$/)?t=t.replace(/\.$/,"")+"["+e+"].":t+=e+"."})),t.replace(/\.$/,"")}}var qt=n(684),Yt=n.n(qt);class Xt extends HTMLElement{constructor(){super(),this.hasAttribute("required")||this.setAttribute("app-click","closeModal()"),this.classList.add("animate","fade-in-out"),this.dataset.title||(this.dataset.title=""),this.innerHTML="\n\n        <section>\n\n            <header>\n                <div>"+this.dataset.title+'</div>\n                <div class="text-right" app-click="closeModal()">\n                    <span class="icon x"></span>\n                </div>\n            </header>\n\n            <section class="body">\n\n                '+this.innerHTML+"\n\n            </section>\n\n        </section>\n\n  "}}customElements.define("modal-auto",Xt);new Ht;class $t extends HTMLElement{constructor(){super(),this.model=this.getAttribute("app-model"),this.on_change=this.getAttribute("app-change"),this.placeholder=this.getAttribute("placeholder"),this.placeholder||(this.placeholder="Please select..."),this.innerHTML='\n\n            <div class="value context-link">'+this.placeholder+"</div>\n            <div class=\"dropdown\" data-animation=\"{'enter':'drop-down','exit':'drop-up'}\">\n                "+this.innerHTML+"\n            </div>\n\n        ",this.dropdown=this.querySelector(".dropdown"),this.timeout="",this.addEventListener("click",this.selectDropdown),this.input=this.querySelector(".value");let e=this.querySelector(".dropdown");this.model&&this.getValue(this.model).then((t=>{if(t){let a=e.querySelectorAll(".option");for(var n in a)if(parseInt(n)&&a[n]&&a[n].getAttribute("value")==t){this.input.innerHTML=a[n].innerHTML;break}}})),this.dataset.url&&this.dataset.bind&&this.dataset.value&&Yt().get(this.dataset.url).then((t=>{let n;for(var a in t=JSON.parse(t))n=document.createElement("div"),n.setAttribute("value",t[a][this.dataset.value]),n.innerHTML=t[a][this.dataset.bind],e.appendChild(n)}))}selectDropdown(e){if(e.target.classList.contains("value","context-link"))document.querySelector("body").style.overflowY="hidden",this.dropdown_context=createContextMenu("dropdown-wrap",this.dropdown.innerHTML,this.getBoundingClientRect()),this.dropdown_context.addEventListener("click",this.selectDropdown),this.dropdown_context._input=this.input,this.dropdown_context._input.model=this.model,this.dropdown_context._input.on_change=this.on_change;else{let t=null,n=null;e&&e.target&&e.target.getAttribute&&e.target.getAttribute("value")?t=e.target.getAttribute("value"):e&&e.target&&e.target.parentNode&&e.target.parentNode.getAttribute&&e.target.parentNode.getAttribute("value")?t=e.target.parentNode.getAttribute("value"):e&&e.target&&e.target.innerHTML&&(t=e.target.innerHTML),null!==t&&(n=(new dt).setValue(this._input.model,t),e.target.hasAttribute("value")?this._input.innerHTML=e.target.innerHTML:this._input.innerHTML=e.target.parentNode.innerHTML),this._input.on_change&&new dt(this._input.on_change).value(e)}}getValue(e){return new Promise(((t,n)=>{setTimeout((function(){e=(new dt).getValue(e),t(e)}),500)}))}}customElements.define("dropdown-select",$t);new Ht;class zt extends HTMLElement{constructor(){super(),this.model=this.getAttribute("app-model"),this.on_change=this.getAttribute("app-change"),this.placeholder=this.getAttribute("placeholder"),this.placeholder||(this.placeholder="Please select..."),this.innerHTML='\n\n            <input type="text" class="value context-link" placeholder="'+this.placeholder+'" spellcheck="false">\n            <div class="dropdown context">\n\n            </div>\n\n        ',this.input=this.querySelector("input.value"),this.dropdown=this.querySelector(".dropdown"),this.timeout="",this.addEventListener("click",this.selectDropdown),this.input._url=this.dataset.url,this.input._bind=this.dataset.bind,this.input._value=this.dataset.value,this.input._model=this.model,this.input._on_change=this.on_change,this.input.dropdown=this.dropdown,this.input._selectDropdown=this.selectDropdown,this.input.addEventListener("keyup",this.search),this.model&&this.getValue(this.model).then((e=>{e&&(this.input.value=e)}))}selectDropdown(e){if(this.input)this.input.focus(),this.input.dropdown_context=createContextMenu("dropdown-wrap",this.dropdown.innerHTML,this.getBoundingClientRect()),this.input.dropdown_context.addEventListener("click",this.selectDropdown),this.input.dropdown_context._input=this.input,this.input.dropdown_context._input.model=this.model,this.input.dropdown_context._input.on_change=this.on_change,e.target&&e.target._app&&e.target._app.model&&e.target._app.model.exp?this.input.dropdown_context._input.model=e.target._app.model.exp:e.target.parentNode&&e.target.parentNode._app&&e.target.parentNode._app.model&&e.target.parentNode._app.model.exp&&(this.input.dropdown_context._input.model=e.target.parentNode._app.model.exp),this.input.value&&(this.input.value="");else{let t=null,n=null;e&&e.target&&e.target._app&&e.target._app.value?t=e.target._app.value:e&&e.target&&e.target.getAttribute&&e.target.dataset.value?t=e.target.dataset.value:e&&e.target&&e.target.parentNode&&e.target.parentNode.getAttribute&&e.target.parentNode.dataset.value?t=e.target.parentNode.dataset.value:e&&e.target&&e.target.innerHTML&&(t=e.target.innerHTML),null!==t&&this._input&&(n=(new dt).setValue(this._input.model,t),this._input.on_change&&new dt(this._input.on_change).value(e),this._input.value=e.target.innerHTML)}}search(e){let t=this;if("ArrowDown"==e.code){let e=t.dropdown_context.querySelectorAll("div"),n=0;for(let t=0;t<e.length;t++)e[t].classList.contains("selected")&&(e[t].classList.remove("selected"),n=t+1),t>=e.length-1&&(n>e.length-1&&(n=e.length-1),e[n].classList.add("selected"))}else if("ArrowUp"==e.code){let e=t.dropdown_context.querySelectorAll("div"),n=0;for(let t=0;t<e.length;t++)e[t].classList.contains("selected")&&(e[t].classList.remove("selected"),n=t-1),t>=e.length-1&&(n<0&&(n=0),e[n].classList.add("selected"))}else if("Enter"==e.code){let n=t.dropdown_context.querySelectorAll("div");for(let a=0;a<n.length;a++)if(n[a].classList.contains("selected")){let i,o;i=n[a].getAttribute("data-value")?n[a].getAttribute("data-value"):n[a].innerHTML,null!==i&&(o=(new dt).setValue(t._model,i),t._on_change&&new dt(t._on_change).value(e),t.value=n[a].innerHTML);break}}else if("string"==typeof e||e.target.value&&e.target.value.length>=3){t&&t.dropdown_context&&t.dropdown_context.classList&&t.dropdown_context.classList.contains("exit-view")&&(t.dropdown_context.style.display="block",t.dropdown_context.classList.remove("exit-view"),t.dropdown_context.classList.add("in-view"),t.dropdown_context.style.zIndex=999);let n="";n="string"==typeof e?e:e.target.value,Yt().get(t._url+n).then((e=>{t.dropdown_context.innerHTML="",e=JSON.parse(e),Array.isArray(e)&&e.length>0?e.map(((e,n)=>{let a=lt()(e,t._bind);if("."==t._value){let n=document.createElement("div");n.dataset.value=".",n.innerHTML=a,n._app={value:e},t.dropdown_context.appendChild(n)}else if(t._value){let n=lt()(e,t._value);t.dropdown_context.innerHTML+='<div data-value="'+n+'">'+a+"</div>"}else t.dropdown_context.innerHTML+="<div>"+a+"</div>"})):t.dropdown_context.innerHTML='<div class="text-italic text-33-grey">Nothing found</div>'}))}else t.dropdown_context&&(t.dropdown_context.innerHTML="")}getValue(e){return new Promise((async(t,n)=>{setTimeout((function(){e=(new dt).getValue(e),t(e)}),1e3)}))}}customElements.define("dropdown-search",zt);new Ht;class Bt extends HTMLElement{constructor(){super(),this.model=this.getAttribute("app-model"),this.on_change=this.getAttribute("app-change"),this.placeholder=this.getAttribute("placeholder"),this.placeholder||(this.placeholder="Please select..."),this.innerHTML='\n\n            <input type="text" class="value context-link" placeholder="'+this.placeholder+'" spellcheck="false">\n            <div class="table-wrap">\n                <div class="table table-mobile">\n\n                </div>\n            </div>\n\n        ',this.input=this.querySelector("input.value"),this.table_el=this.querySelector(".table"),this.timeout="",this.addEventListener("click",this.selectRow),this.input._url=this.dataset.url,this.input._columns=this.dataset.columns.split(","),this.input._model=this.model,this.input._on_change=this.on_change,this.input.table_el=this.table_el,this.input._selectRow=this.selectRow,this.input.addEventListener("keyup",this.search)}selectRow(e){let t=null,n=null,a=null;e&&e.target&&e.target._app&&e.target._app.value&&(t=e.target._app.value,a=e.target._app.model),this.table_el._rows&&this.table_el._rows.map((e=>{e.classList.remove("selected")})),null!==t&&null!==a&&(e.target.parentNode.classList.add("selected"),n=(new dt).setValue(a,t),e.target._app.on_change&&new dt(e.target._app.on_change).value(e))}search(e){let t=this;if("string"==typeof e||e.target.value&&e.target.value.length>=3){let n="";n="string"==typeof e?e:e.target.value,Yt().get(t._url+n).then((e=>{t.table_el.innerHTML="",e=JSON.parse(e),Array.isArray(e)&&e.length>0?(t.table_el._rows=[],e.map(((e,n)=>{let a=document.createElement("div");a.classList.add("row"),a.addEventListener("click",this.selectRow),t._columns.map(((n,i)=>{let o=lt()(e,n),r=document.createElement("div");r.classList.add("cell","middle","clickable","name","no-icon"),r.innerHTML=o,r._app={model:t._model,value:e},t._on_change&&(r._app.on_change=t._on_change),a.appendChild(r)})),t.table_el._rows.push(a),t.table_el.appendChild(a)}))):t.table_el.innerHTML='<div class="row"><div class="cell middle">Nothing found</div></div>'}))}else t.table_el&&(t.table_el.innerHTML="")}}customElements.define("table-search",Bt);class Jt extends HTMLElement{constructor(){super(),this.model=this.getAttribute("app-model"),this.on_change=this.getAttribute("app-change"),this.placeholder=this.getAttribute("placeholder"),this.datetime=this.hasAttribute("data-datetime"),this.format=this.dataset.format,this.placeholder||(this.placeholder="Select Date..."),this.innerHTML='\n\n            <div type="text" class="value context-link" data-value="true">'+this.placeholder+'</div>\n\n            <div class="dates-wrap context" data-animation="{\'enter\':\'drop-down\',\'exit\':\'drop-up\'}">\n                <div class="dates-close text-right clickable">&times;</div>\n                <div class="dates-time context-link">\n                    <div class="dates-time-title">Set time</div>\n                    <div class="dates-time-input-wrap">\n                        <select class="text-right context-link dates-time-hrs">\n                        </select>\n                        <div class="divider">:</div>\n                        <select class="text-right context-link dates-time-mins">\n                        </select>\n                    </div>\n                </div>\n                <div class="dates-header">\n                    <div class="arrow prev context-link"><</div>\n                    <div class="month-wrap">\n                        <div class="month"></div>\n                        <div class="year"></div>\n                    </div>\n                    <div class="arrow next context-link">></div>\n                </div>\n                <div class="dates">\n\n                </div>\n\n            </div>\n\n        ',this.months=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],this.months_short=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.dates=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"],this.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.days_short=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.datepicker=this.querySelector(".dates-wrap"),this.time_hrs=this.querySelector(".dates-time-hrs"),this.time_mins=this.querySelector(".dates-time-mins"),this.addEventListener("click",this.openDatePicker);let e=this.querySelector(".value");this.getDate(this.model).then((t=>{if(t){let n;if("function"==typeof moment&&this.format)n=moment(t).format(this.format);else{let e=new Date(t);if(n=this.days[e.getDay()]+" "+this.dates[e.getDate()-1]+" "+this.months[e.getMonth()]+" "+e.getFullYear(),this.datetime){let t=e.getHours(),a=e.getMinutes();a<10&&(a="0"+parseInt(a)),n+=" at "+t+":"+a}}e.innerHTML=n}}))}getDaysArray(e,t,n){void 0===e&&(e=(new Date).getFullYear()),void 0===t&&(t=(new Date).getMonth());var a=t,i=new Date(e,a,1),o=new Date(e,a,1),r=this.datepicker_context.querySelector(".dates"),s=this.datepicker_context.querySelector(".month"),l=this.datepicker_context.querySelector(".year"),p=[{date:"M",type:"day"},{date:"T",type:"day"},{date:"W",type:"day"},{date:"T",type:"day"},{date:"F",type:"day"},{date:"S",type:"day"},{date:"S",type:"day"}],c=i.getDay()-1,d=(new Date).getDate(),u=(new Date).getMonth();this.datepicker_context.selected=i,c<0&&(c=6),o.setDate(o.getDate()-c);for(var h=0;h<c;h++){let e=o.toISOString();p.push({date:o.getDate()+"",type:"pre",iso:e}),o.setDate(o.getDate()+1)}for(;i.getMonth()==a;){let e=i.getDate(),t=i.toString();e==n?p.push({date:e+"",type:"selected",iso:t}):e<d&&u==a?p.push({date:e+"",type:"passed",iso:t}):e==d&&u==a?p.push({date:e+"",type:"today",iso:t}):p.push({date:e+"",type:"reg",iso:t}),i.setDate(i.getDate()+1)}if(p.length>42)var f=49-p.length;for(;i.getDate()<=f;){let e=i.getDate(),t=i.toString();p.push({date:e+"",type:"post",iso:t}),i.setDate(i.getDate()+1)}for(var h in s.innerHTML=this.months[t],l.innerHTML=e,r.innerHTML="",p)if(p[h]&&p[h].date){let e=document.createElement("div");e.classList.add("date","context-link",p[h].type),e.innerHTML=p[h].date,e.dataset.date=p[h].iso,e.dataset.model=this.model,r.append(e)}}addDateTimes(e){let t,n,a=23,i="";"minutes"==e&&(a=59);for(var o=0;o<=a;o++)t=o,n=o,o<10&&"minutes"==e&&(t="0"+o,n="0"+o),i+='<option value="'+n+'">'+t+"</option>";return i}openDatePicker(e){var t=this.selectDate;document.querySelector("body").style.overflowY="hidden",this.datepicker_context=createContextMenu("dates-wrap",this.datepicker.innerHTML,this.getBoundingClientRect()),this.datepicker_context.addEventListener("click",t),this.datepicker_context.days=this.days,this.datepicker_context.months=this.months,this.datepicker_context.dates=this.dates,this.datepicker_context.datetime=this.datetime,this.datepicker_context.format=this.format,this.datepicker_context.parent=this,this.datepicker_context.hrs=this.datepicker_context.querySelector(".dates-time-hrs"),this.datepicker_context.mins=this.datepicker_context.querySelector(".dates-time-mins"),this.datepicker_context.hrs.dataset.model=this.model,this.datepicker_context.mins.dataset.model=this.model,this.datepicker_context.hrs.parent=this,this.datepicker_context.mins.parent=this,this.datepicker_context.hrs.innerHTML=this.addDateTimes("hours"),this.datepicker_context.mins.innerHTML=this.addDateTimes("minutes"),this.datepicker_context.hrs.addEventListener("change",(function(e){setTimeout((function(){t(e)}),100)})),this.datepicker_context.mins.addEventListener("change",(function(e){setTimeout((function(){t(e)}),100)})),this.datetime&&this.datepicker_context.classList.add("datetime");let n=(new Evaluate).getValue(this.model);if(n){let e=new Date(n);this.getDaysArray(e.getFullYear(),e.getMonth(),e.getDate()),this.datepicker_context.hrs.value=e.getHours();let t=e.getMinutes();this.datepicker_context.mins.value=t<10?"0"+t:t+""}else{let e=new Date;this.datepicker_context.hrs.value=e.getHours();let t=e.getMinutes();this.datepicker_context.mins.value=t<10?"0"+t:t+"",this.getDaysArray()}view.enterView(this.datepicker_context).then((()=>{}))}selectDate(e){if(e.target.dataset.date){let t,n=new Date(e.target.dataset.date);"function"==typeof moment&&this.format?this.hrs&&this.hrs.value&&this.hrs.value<24&&this.datetime?(t=moment(e.target.dataset.date).set({hours:this.hrs.value,mins:this.mins.value}).format(this.format),n.setHours(this.hrs.value),this.mins.value<10&&(this.mins.value="0"+parseInt(this.mins.value)),this.mins&&this.mins.value&&this.mins.value<60&&n.setMinutes(this.mins.value)):t=moment(e.target.dataset.date).format(this.format):(t=this.days[n.getDay()]+" "+this.dates[n.getDate()-1]+" "+this.months[n.getMonth()]+" "+n.getFullYear(),this.hrs&&this.hrs.value&&this.hrs.value<24&&this.datetime&&(n.setHours(this.hrs.value),this.mins.value<10&&(this.mins.value="0"+parseInt(this.mins.value)),this.mins&&this.mins.value&&this.mins.value<60&&n.setMinutes(this.mins.value),t+=" at "+this.hrs.value+":"+this.mins.value)),(new Evaluate).setValue(e.target.dataset.model,n.toString()),this.parent.querySelector(".value").innerHTML=t,this.querySelectorAll(".date").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected"),this.classList.contains("datetime")||view.exitView(this),this.parent.on_change&&new Evaluate(this.parent.on_change).value(e)}if(e.target.classList.contains("dates-time-mins")){let t=(new Evaluate).getValue(e.target.dataset.model),n=new Date(t);if(n instanceof Date&&!isNaN(n)){n.setMinutes(e.target.value);let t,a=n.getMinutes();(new Evaluate).setValue(e.target.dataset.model,n.toString()),"function"==typeof moment&&e.target.parent.dataset.format?t=moment(n.toISOString()).format(e.target.parent.dataset.format):(a<10&&(a="0"+a),t=e.target.parent.days[n.getDay()]+" "+e.target.parent.dates[n.getDate()-1]+" "+e.target.parent.months[n.getMonth()]+" "+n.getFullYear()+" at "+n.getHours()+":"+a),e.target.parent.querySelector(".value").innerHTML=t,e.target.parent.on_change&&new Evaluate(e.target.parent.on_change).value(e)}}if(e.target.classList.contains("dates-time-hrs")){let t=(new Evaluate).getValue(e.target.dataset.model),n=new Date(t);if(n instanceof Date&&!isNaN(n)){n.setHours(e.target.value);let t,a=n.getMinutes();(new Evaluate).setValue(e.target.dataset.model,n.toString()),"function"==typeof moment&&e.target.parent.dataset.format?t=moment(n.toISOString()).format(e.target.parent.dataset.format):(a<10&&(a="0"+a),t=e.target.parent.days[n.getDay()]+" "+e.target.parent.dates[n.getDate()-1]+" "+e.target.parent.months[n.getMonth()]+" "+n.getFullYear()+" at "+n.getHours()+":"+a),e.target.parent.querySelector(".value").innerHTML=t,e.target.parent.on_change&&new Evaluate(e.target.parent.on_change).value(e)}}if(e.target.classList.contains("prev")){let e=this.selected.getMonth()-2;return this.selected.setMonth(e),void this.parent.getDaysArray(this.selected.getFullYear(),this.selected.getMonth())}if(e.target.classList.contains("next")){let e=new Date(this.selected.setMonth(this.selected.getMonth()));this.parent.getDaysArray(e.getFullYear(),e.getMonth())}else;}getDate(e){return new Promise((async(t,n)=>{setTimeout((function(){e=(new Evaluate).getValue(e),t(e)}),1e3)}))}}customElements.define("date-picker",Jt);class Wt extends HTMLElement{constructor(){super(),this.model=this.getAttribute("app-model"),this.on_change=this.getAttribute("app-change"),this.placeholder=this.getAttribute("placeholder"),this.datetime=this.hasAttribute("data-datetime"),this.format=this.dataset.format,this.placeholder||(this.placeholder="Select Date..."),this.innerHTML='\n\n            <div class="dates-wrap">\n                <div class="dates-time">\n                    <div class="dates-time-title">Set time</div>\n                    <div class="dates-time-input-wrap">\n                        <input type="text" placeholder="17" class="text-right context-link dates-time-hrs" min="0" max="23">\n                        <div class="divider">:</div>\n                        <input type="text" placeholder="45" class="text-right context-link dates-time-mins" min="0" max="59">\n                    </div>\n                </div>\n                <div class="dates-header">\n                    <div class="arrow prev context-link"><</div>\n                    <div class="month-wrap">\n                        <div class="month"></div>\n                        <div class="year"></div>\n                    </div>\n                    <div class="arrow next context-link">></div>\n                </div>\n                <div class="dates">\n\n                </div>\n\n            </div>\n\n        ',this.months=["January","Febuary","March","April","May","June","July","August","September","October","November","December"],this.months_short=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.dates=["1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th","13th","14th","15th","16th","17th","18th","19th","20th","21st","22nd","23rd","24th","25th","26th","27th","28th","29th","30th","31st"],this.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],this.days_short=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.datepicker=this.querySelector(".dates-wrap"),this.getDate(this.model).then((e=>{this.openDatePicker()}))}getDaysArray(e,t,n){void 0===e&&(e=(new Date).getFullYear()),void 0===t&&(t=(new Date).getMonth());var a=t,i=new Date(e,a,1),o=new Date(e,a,1),r=this.datepicker.querySelector(".dates"),s=this.datepicker.querySelector(".month"),l=this.datepicker.querySelector(".year"),p=[{date:"M",type:"day"},{date:"T",type:"day"},{date:"W",type:"day"},{date:"T",type:"day"},{date:"F",type:"day"},{date:"S",type:"day"},{date:"S",type:"day"}],c=i.getDay()-1,d=(new Date).getDate(),u=(new Date).getMonth();this.datepicker.selected=i,c<0&&(c=6),o.setDate(o.getDate()-c);for(var h=0;h<c;h++){let e=o.toISOString();p.push({date:o.getDate()+"",type:"pre",iso:e}),o.setDate(o.getDate()+1)}for(;i.getMonth()==a;){let e=i.getDate(),t=i.toString();e==n?p.push({date:e+"",type:"selected",iso:t}):e<d&&u==a?p.push({date:e+"",type:"passed",iso:t}):e==d&&u==a?p.push({date:e+"",type:"today",iso:t}):p.push({date:e+"",type:"reg",iso:t}),i.setDate(i.getDate()+1)}if(p.length>42)var f=49-p.length;for(;i.getDate()<=f;){let e=i.getDate(),t=i.toString();p.push({date:e+"",type:"post",iso:t}),i.setDate(i.getDate()+1)}for(var h in s.innerHTML=this.months[t],l.innerHTML=e,r.innerHTML="",p)if(p[h]&&p[h].date){let e=document.createElement("div");e.classList.add("date","context-link",p[h].type),e.innerHTML=p[h].date,e.dataset.date=p[h].iso,e.dataset.model=this.model,r.append(e)}}openDatePicker(e){var t=this.selectDate;this.datepicker.addEventListener("click",t),this.datepicker.days=this.days,this.datepicker.months=this.months,this.datepicker.dates=this.dates,this.datepicker.datetime=this.datetime,this.datepicker.format=this.format,this.datepicker.parent=this,this.datepicker.hrs=this.datepicker.querySelector(".dates-time-hrs"),this.datepicker.mins=this.datepicker.querySelector(".dates-time-mins"),this.datepicker.hrs.dataset.model=this.model,this.datepicker.mins.dataset.model=this.model,this.datepicker.hrs.parent=this,this.datepicker.mins.parent=this,this.datepicker.hrs.addEventListener("keydown",(function(e){(parseInt(e.key)||0==e.key)&&setTimeout((function(){t(e)}),100)})),this.datepicker.mins.addEventListener("keydown",(function(e){(parseInt(e.key)||0==e.key)&&setTimeout((function(){t(e)}),100)})),this.datetime&&this.datepicker.classList.add("datetime");let n=(new Evaluate).getValue(this.model);if(n){let e=new Date(n);this.getDaysArray(e.getFullYear(),e.getMonth(),e.getDate()),this.datepicker.hrs.value=e.getHours(),this.datepicker.mins.value=e.getMinutes(),this.datepicker.mins.value<10&&(this.datepicker.mins.value="0"+this.datepicker.mins.value)}else{let e=new Date;this.datepicker.hrs.value=e.getHours(),this.datepicker.mins.value=e.getMinutes(),this.datepicker.mins.value<10&&(this.datepicker.mins.value="0"+this.datepicker.mins.value),this.getDaysArray()}view.enterView(this.datepicker).then((()=>{}))}selectDate(e){if(e.target.dataset.date){let t=new Date(e.target.dataset.date);(new Evaluate).setValue(e.target.dataset.model,t.toString()),this.querySelectorAll(".date").forEach((e=>{e.classList.remove("selected")})),e.target.classList.add("selected"),this.classList.contains("datetime")||view.exitView(this),this.parent.on_change&&new Evaluate(this.parent.on_change).value(e)}if(e.target.classList.contains("dates-time-mins")){let t=(new Evaluate).getValue(e.target.dataset.model),n=new Date(t);n instanceof Date&&!isNaN(n)&&(n.setMinutes(e.target.value),(new Evaluate).setValue(e.target.dataset.model,n.toString()),e.target.parent.on_change&&new Evaluate(e.target.parent.on_change).value(e))}if(e.target.classList.contains("dates-time-hrs")){let t=(new Evaluate).getValue(e.target.dataset.model),n=new Date(t);n instanceof Date&&!isNaN(n)&&(n.setHours(e.target.value),(new Evaluate).setValue(e.target.dataset.model,n.toString()),e.target.parent.on_change&&new Evaluate(e.target.parent.on_change).value(e))}if(e.target.classList.contains("prev")){let e=this.selected.getMonth()-2;return this.selected.setMonth(e),void this.parent.getDaysArray(this.selected.getFullYear(),this.selected.getMonth())}if(e.target.classList.contains("next")){let e=new Date(this.selected.setMonth(this.selected.getMonth()));this.parent.getDaysArray(e.getFullYear(),e.getMonth())}else;}getDate(e){return new Promise((async(t,n)=>{setTimeout((function(){e=(new Evaluate).getValue(e),t(e)}),1e3)}))}}customElements.define("date-picker-static",Wt);window.proxies={},window.update_queue=[],window.update_queue_processing=!1,window.update_queue_cnt=0,window.update_loops={},window.view=new Ht,window.Index=Rt,window.index=new Rt,window.Evaluate=dt,window.evaluate=new dt,window.http=Yt(),window.extend={},window.watch={},window.ws_host="",window.ws_timer=!1,window.ws_server="",window.ws_ping=!1,window.typing=!1,window.typing_count=0,window.typing_timer=!1,window._function_call_params="",Array.prototype.localSet=function(e){return localStorage.setItem(e,JSON.stringify(this)),this},Array.prototype.localGet=function(e){let t=JSON.parse(localStorage.getItem(e));return t||(t=[]),t},Array.prototype.localRemove=function(e){return localStorage.removeItem(e),this},document.addEventListener("dragover",(function(e){e.preventDefault()})),window.scope={},window.scope.view={},window.scope.new={},window.scope._loaded=!1,window.scope._push=function(e,t){let n=t.findIndex((t=>t==e));Array.isArray(t)||(t=[]),n<0?t.push(e):t[n]=e,t.localSet(this._params[1]),view.update(this._params[1]),scope.new={}},window.scope._splice=function(e,t){if(!Array.isArray(t))return;if(confirm("Ok to delete this element?")){let n=e;"object"==typeof n&&(n=t.findIndex((t=>t==e))),n>=0&&(t.splice(n,1),t.localSet(this._params[1]),view.update(this._params[1])),scope.new={}}},window.scope._edit=function(e,t){scope.openModal("edit"),scope.new=e},window.scope._notify=function(e){},window.scope._get=function(e,t){return new Promise((function(n,a){Yt().get(e).then((e=>{e=JSON.parse(e),scope[t]&&(scope[t]=e),n(e)})).catch((e=>{a(e)}))}))},window.scope._post=function(e,t,n){return new Promise((function(a,i){Yt().post(e,t).then((e=>{if(e=JSON.parse(e),scope[n])for(var t in scope[n]){if(scope[n][t]._key==e._key){scope[n][t]=e;break}t>=scope[n].length-1&&scope[n].unshift(e)}a(e)})).catch((e=>{i(e)}))}))},window.scope._put=function(e,t,n){return new Promise((function(a,i){Yt().put(e,t).then((e=>{if(e=JSON.parse(e),scope[n])for(var t in scope[n]){if(scope[n][t]._key==e._key){scope[n][t]=e;break}t>=scope[n].length-1&&scope[n].unshift(e)}a(e)})).catch((e=>{i(e)}))}))},window.scope._delete=function(e,t){return new Promise((function(n,a){Yt().delete(e).then((e=>{if(e=JSON.parse(e),scope[t]){scope[t].find(((e,n)=>{if(n==id||e._key===id)return scope[t].splice(n,1),!0}))}n(e)})).catch((e=>{a(e)}))}))},window.app={index:{},for:[],elements:{},animations:[],init:[],prefix:"app-"},document.addEventListener("DOMContentLoaded",(async()=>{window.app.elements=document.body.querySelectorAll("*"),controller();for(var e=0;e<window.app.elements.length;e++){let n=window.app.elements[e];if("object"==typeof n.attributes)for(var t=0;t<n.attributes.length;t++)n.attributes[t].nodeName.startsWith(app.prefix)&&new Rt(n.attributes[t].nodeValue,n,n.attributes[t].nodeName),(n.dataset.animation||n.dataset.parallax)&&window.app.animations.push(n);if(e>=window.app.elements.length-1){scope._loaded=!0,document.querySelector("body").classList.add("loaded"),Gt(),Zt();for(let e in window.extend)window.extend[e]&&"function"==typeof window.extend[e]&&window.extend[e]();for(let e=0;e<window.app.init.length;e++)Ft()(window.app.init[e]);view.update("init")}}})),window.addEventListener("load",(()=>{})),document.addEventListener("click",(function(e){e.target.classList.contains("context")||e.target.classList.contains("context-link")||contextCloseAll()})),document.addEventListener("scroll",(()=>{document.body.scrollTop%20==0&&Gt()})),window.addEventListener("focus",(e=>{window.ws_host&&socketConnect()}),!1),window.addEventListener("blur",(e=>{}),!1),document.onkeydown=function(e){window.typing=!0,window.typing_count++,window.typing_timer&&clearTimeout(window.typing_timer),window.typing_timer=setTimeout((()=>{window.typing=!1}),1e3)},window.socketConnect=e=>{if(!e&&window.ws_host){if(e=window.ws_host,window.ws_server&&1==window.ws_server.readyState)return}else{if(!e)return;window.ws_host=e}window.ws_server=new WebSocket(e),window.ws_server.onmessage=function(e){let t;t="string"==typeof e.data&&e.data.match(/\[|\{(.*?)}|\]/)?JSON.parse(e.data):e.data,view.set("ws_data",t)},window.ws_server.onerror=function(t){1!==window.ws_server.readyState&&(console.log(t,"Attempting reconnect..."),window.ws_timer||(window.ws_timer=setTimeout((()=>{socketConnect(e)}),3e3)))},window.ws_ping||(window.ws_ping=setInterval((function(){1!==window.ws_server.readyState&&(console.log("Socket down, attempting reconnect..."),socketConnect(e))}),1e4))};const Zt=()=>{let e=document.getElementsByClassName("sortable");for(let t in e)if(e[t]instanceof Element){let n=0;e[t].classList.contains("table")&&(n=1),new rt(e[t],{animation:150,group:"nested",forceFallback:!0,swapThreshold:.65,filter:".sortable-disabled",handle:".sortable-handle",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",onEnd:function(a){if(e[t]._app&&e[t]._app.sort){let i=window.evaluate.getValue(e[t]._app.sort.exp),o=a.newIndex-n,r=a.oldIndex-n,s=i[r];i.splice(r,1),i.splice(o,0,s),view.update(e[t]._app.sort.exp),e[t]._app&&e[t]._app.sorted&&new dt(e[t]._app.sorted.exp).value(a)}else if(a.item&&a.item._app&&a.item._app.scope_obj){let i=window.evaluate.getValue(a.item._app.scope_obj),o=a.newIndex-n,r=a.oldIndex-n,s=i[r];i.splice(r,1),i.splice(o,0,s),view.update(a.item._app.scope_obj),e[t]._app&&e[t]._app.sorted&&new dt(e[t]._app.sorted.exp).value(a)}},onMove:function(e){return-1===e.related.className.indexOf("sortable-disabled")}})}},Ut=e=>{let t=e.getAttribute("anim-trigger-top"),n=e.getAttribute("anim-trigger-bottom"),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=e.getBoundingClientRect().top;if(t=t?a*(parseFloat(t.replace("%",""))/100):10,n?(n=a*(parseFloat(n.replace("%",""))/100),n=a-n):n=a-10,!isNaN(e.dataset.parallax)&&i<=a){e.dataset.parallax_top||(e.dataset.parallax_top=100);let t=window.pageYOffset*parseFloat(e.dataset.parallax);"down"==e.dataset.parallax_direction?e.style.transform="translateY("+t+"px)":e.style.transform="translateY(-"+t+"px)"}return i<=n&&i>=t},Gt=()=>{if(window.app.animations&&window.app.animations.length>0)for(let e=0;e<window.app.animations.length;e++){let t=window.app.animations[e];Ut(t)?t.classList&&!t.classList.contains("in-view")&&(Kt(t),t.hasAttribute("app-lazy")&&en(t)):t.classList&&t.classList.contains("in-view")&&Qt(t,e)}},Kt=e=>{e.classList.contains("exit-view")&&setTimeout((function(){e.classList.remove("exit-view")}),1e3),e.classList.contains("in-view")||(e.getAttribute("anim-duration")&&(e.style.webkitAnimationDuration=e.getAttribute("anim-duration")),e.getAttribute("anim-easing")&&(e.style.animationTimingFunction=e.getAttribute("anim-easing")),e.getAttribute("anim-delay")&&(e.style.animationDelay=e.getAttribute("anim-delay")),e.classList.add("in-view"))},Qt=e=>{e.getAttribute("anim-exit")&&(e.getAttribute("anim-exit-duration")&&(e.style.animationDuration=e.getAttribute("anim-exit-duration")),e.getAttribute("anim-exit-easing")&&(e.style.animationTimingFunction=e.getAttribute("anim-exit-easing")),e.classList.contains("in-view")&&e.classList.remove("in-view"),e.classList.add("exit-view"),e.style.animationDelay=0)};window.createContextMenu=function(e,t,n){if(!e||!n)return!1;let a=document.querySelector("."+e);a&&a.parentNode.removeChild(a);let i=document.createElement("div");return i.innerHTML=t,i.classList.add(e,"context","context-temp","animate","dropdown","exit-view"),i.style.position="fixed",i.style.zIndex="999",window.innerWidth<=850?(i.style.top=n.top+"px",i.style.left="0px",i.style.width="calc(100vw - 2rem)"):(i.style.top=n.top+"px",i.style.left=n.left+"px",i.style.width=n.width+"px"),document.querySelector("body").append(i),i},window.contextCloseAll=function(){document.querySelector("body").style.overflowY="auto",scope&&scope.view&&scope.view.context&&(scope.view.context=!1);for(var e=document.querySelectorAll(".context"),t=0;t<e.length;t++)view.exitView(e[t]),e[t].classList.contains("context-temp")&&e[t].parentNode.removeChild(e[t]);setTimeout((function(){for(var e=document.querySelectorAll("dropdown-select"),t=0;t<e.length;t++)e[t].style.zIndex=1;var n=document.querySelectorAll("dropdown-search");for(t=0;t<n.length;t++)n[t].style.zIndex=1}),500)};const en=e=>{e.setAttribute("src",e.getAttribute("app-lazy"))}})()})();
//# sourceMappingURL=framework33.js.map